(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14aff02c"],{2908:function(t,e,i){"use strict";var a=i("9158"),n=i.n(a);n.a},"343a":function(t,e,i){var a=i("7a2c"),n=i("8b2a").trim,o=i("e7e4"),s=a.parseFloat,r=1/s(o+"-0")!==-1/0;t.exports=r?function(t){var e=n(String(t)),i=s(e);return 0===i&&"-"==e.charAt(0)?-0:i}:s},4303:function(t,e,i){var a=i("cc55"),n=i("ad02").f,o=Function.prototype,s=o.toString,r=/^\s*function ([^ (]*)/,c="name";!a||c in o||n(o,c,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(t){return""}}})},"4ccb":function(t,e,i){var a=i("8682"),n=i("343a");a({global:!0,forced:parseFloat!=n},{parseFloat:n})},"8b2a":function(t,e,i){var a=i("0e90"),n=i("e7e4"),o="["+n+"]",s=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),c=function(t){return function(e){var i=String(a(e));return 1&t&&(i=i.replace(s,"")),2&t&&(i=i.replace(r,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},9158:function(t,e,i){},"997d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"movielist",staticClass:"movielist",attrs:{name:"movielist"},on:{scroll:t.lazyLoad}},[t._l(t.movieData.data.subjects,(function(e,a){return i("div",{key:a,ref:"movieitem",refInFor:!0,staticClass:"movieitem clearfix",attrs:{id:e.id},on:{click:function(i){return t.viewMovieDetail({name:"movieDetail",params:{id:e.id}})}}},[i("div",{staticClass:"fl movieimg"},[i("img",{staticClass:"autoimg",attrs:{src:e.images.small,alt:""}})]),i("div",{staticClass:"fl movieinfo"},[i("div",{staticClass:"one-txt"},[t._v(t._s(e.title))]),i("div",{staticClass:"one-txt"},[i("span",[t._v("橙子影视评分：")]),i("span",{},[t._v(t._s(e.rating.average)+"分")])]),i("div",{staticClass:"one-txt"},[i("span",[t._v("导演：")]),i("span",[t._v(t._s(e.directors[0].name))])]),i("div",{staticClass:"one-txt"},[i("span",[t._v("主演：")]),i("span",[t._v(t._s(e.avatarsInfo))])]),i("div",{staticClass:"one-txt "},[i("span",[t._v(t._s(e.genresInfo))])])]),i("div",{staticClass:"fl buyinfo"},[i("div",{staticClass:"buybtn",on:{click:function(i){return i.stopPropagation(),t.buyTickets(e.id)}}},[i("van-button",{attrs:{round:"",size:"small",type:"info",color:"linear-gradient(to right, #FF429B, #FF3472)"}},[t._v("购票")])],1)])])})),t.isHas?t._e():i("p",{staticClass:"notice"},[t._v("已经没有更多数据可以加载了！")])],2)},n=[],o=(i("3546"),i("0e8d"),i("fdc1"),i("851c"),i("6962"),i("4303"),i("a94a"),i("639b"),i("4f5b"),i("4ccb"),i("b287"),i("9d37")),s=(i("debc"),i("08c1"));function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(o["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u=Object(s["a"])("movielistModule"),l=u.mapState,v={name:"movielist",computed:c({},l(["movieData","params","isHas","isInit","isInitial","movieList","movieListH","movieListData"])),methods:{getMovieData:function(){var t=this;this.$toast.loading({duration:0,message:"数据加载中..."}),this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/in_theaters",params:this.params}).then((function(e){if(e.data.subjects.forEach((function(t){t.genresInfo=t.genres.join(" | "),t.avatarsInfo="",t.casts.forEach((function(e){t.avatarsInfo+=e.name+" / "})),t.avatarsInfo=t.avatarsInfo.slice(0,-3)})),t.isInit){var i=t.$refs.movielist,a=i.clientHeight;t.$store.commit("movielistModule/changeMovieList",{movieList:i,movieListH:a})}t.$store.commit("movielistModule/changeMovieData",e),t.$toast.clear()})).catch((function(e){t.$toast.clear()}))},viewMovieDetail:function(t){this.$router.push(t)},lazyLoad:function(){var t=this;if(t.isHas){var e=setTimeout((function(){for(var e=1;e<t.movieListData.timers.length;e++)clearTimeout(t.movieListData.timers[e]);var i=t.$refs.movieitem[t.$refs.movieitem.length-1],a=document.querySelector(".indexfooter").clientHeight,n=i.getBoundingClientRect(),o=n.top,s=parseFloat(getComputedStyle(i).marginBottom),r=n.height,c=innerHeight-a-s-r+50>=o;c&&t.getMovieData(),t.$store.state.movielistModule.movieListData.timers=[]}),1e3);t.$store.state.movielistModule.movieListData.timers.push(e)}},buyTickets:function(t){var e=this,i=localStorage.getItem("user");i?(i=JSON.parse(i),i.isLogin||Dialog.confirm({title:"您还没有登录不能购买该电影哦！",message:"确定将自动跳转到登录页面"}).then((function(){return e.$router.push({name:"login"})})).catch((function(){})),this.$router.push({name:"buyTickets",query:{id:t}})):Dialog.confirm({title:"您还没有登录不能购买该电影哦！",message:"确定将自动跳转到登录页面"}).then((function(){return e.$router.push({name:"login"})})).catch((function(){})),this.$toast.clear()}},created:function(){var t=this;t.isInitial&&t.getMovieData()},mounted:function(){}},f=v,m=(i("2908"),i("5511")),p=Object(m["a"])(f,a,n,!1,null,"608affa4",null);e["default"]=p.exports},e7e4:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-14aff02c.0297745d.js.map