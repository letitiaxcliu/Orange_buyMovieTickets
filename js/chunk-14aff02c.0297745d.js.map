{"version":3,"sources":["webpack:///./src/views/movieComponent/Movielist.vue?00fb","webpack:///./node_modules/_core-js@3.6.2@core-js/internals/number-parse-float.js","webpack:///./node_modules/_core-js@3.6.2@core-js/modules/es.function.name.js","webpack:///./node_modules/_core-js@3.6.2@core-js/modules/es.parse-float.js","webpack:///./node_modules/_core-js@3.6.2@core-js/internals/string-trim.js","webpack:///./src/views/movieComponent/Movielist.vue?0e5c","webpack:///src/views/movieComponent/Movielist.vue","webpack:///./src/views/movieComponent/Movielist.vue?1f9f","webpack:///./src/views/movieComponent/Movielist.vue","webpack:///./node_modules/_core-js@3.6.2@core-js/internals/whitespaces.js"],"names":["global","trim","whitespaces","$parseFloat","parseFloat","FORCED","Infinity","module","exports","string","trimmedString","String","result","charAt","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","$","parseFloatImplementation","forced","requireObjectCoercible","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","replace","start","end","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","on","lazyLoad","_l","movieData","data","item","index","key","refInFor","id","$event","viewMovieDetail","name","params","images","small","_v","_s","title","rating","average","directors","avatarsInfo","genresInfo","stopPropagation","buyTickets","isHas","_e","staticRenderFns","subjects","forEach","v","genres","join","casts","slice","movieList","movieListH","component"],"mappings":"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","file":"js/chunk-14aff02c.0297745d.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.4.1@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Movielist.vue?vue&type=style&index=0&id=608affa4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.4.1@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Movielist.vue?vue&type=style&index=0&id=608affa4&lang=less&scoped=true&\"","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar $parseFloat = global.parseFloat;\nvar FORCED = 1 / $parseFloat(whitespaces + '-0') !== -Infinity;\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(String(string));\n  var result = $parseFloat(trimmedString);\n  return result === 0 && trimmedString.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar parseFloatImplementation = require('../internals/number-parse-float');\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != parseFloatImplementation }, {\n  parseFloat: parseFloatImplementation\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"movielist\",staticClass:\"movielist\",attrs:{\"name\":\"movielist\"},on:{\"scroll\":_vm.lazyLoad}},[_vm._l((_vm.movieData.data.subjects),function(item,index){return _c('div',{key:index,ref:\"movieitem\",refInFor:true,staticClass:\"movieitem clearfix\",attrs:{\"id\":item.id},on:{\"click\":function($event){return _vm.viewMovieDetail({name: 'movieDetail', params: {id: item.id}})}}},[_c('div',{staticClass:\"fl movieimg\"},[_c('img',{staticClass:\"autoimg\",attrs:{\"src\":item.images.small,\"alt\":\"\"}})]),_c('div',{staticClass:\"fl movieinfo\"},[_c('div',{staticClass:\"one-txt\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"one-txt\"},[_c('span',[_vm._v(\"橙子影视评分：\")]),_c('span',{},[_vm._v(_vm._s(item.rating.average)+\"分\")])]),_c('div',{staticClass:\"one-txt\"},[_c('span',[_vm._v(\"导演：\")]),_c('span',[_vm._v(_vm._s(item.directors[0].name))])]),_c('div',{staticClass:\"one-txt\"},[_c('span',[_vm._v(\"主演：\")]),_c('span',[_vm._v(_vm._s(item.avatarsInfo))])]),_c('div',{staticClass:\"one-txt \"},[_c('span',[_vm._v(_vm._s(item.genresInfo))])])]),_c('div',{staticClass:\"fl buyinfo\"},[_c('div',{staticClass:\"buybtn\",on:{\"click\":function($event){$event.stopPropagation();return _vm.buyTickets(item.id)}}},[_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\",\"type\":\"info\",\"color\":\"linear-gradient(to right, #FF429B, #FF3472)\"}},[_vm._v(\"购票\")])],1)])])}),(!_vm.isHas)?_c('p',{staticClass:\"notice\"},[_vm._v(\"已经没有更多数据可以加载了！\")]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <!-- <div class=\"moviebox\" ref=\"moviebox\"> -->\r\n\r\n      <!-- 方式二 -->\r\n      <!-- <van-tabs v-model=\"activeName\" line-height=\"2px\" title-active-color=\"#EE0A24\" :border=\"false\">\r\n        <van-tab title=\"热映\"> -->\r\n          <div class=\"movielist\" ref=\"movielist\" name=\"movielist\" @scroll=\"lazyLoad\">\r\n\r\n            <div class=\"movieitem clearfix\" v-for=\"(item,index) in movieData.data.subjects\"\r\n            :key=\"index\" ref=\"movieitem\" :id=\"item.id\" @click=\"viewMovieDetail({name: 'movieDetail', params: {id: item.id}})\">\r\n              <div class=\"fl movieimg\">\r\n                <img class=\"autoimg\" :src=\"item.images.small\" alt />\r\n              </div>\r\n              <div class=\"fl movieinfo\">\r\n                <div class=\"one-txt\">{{item.title}}</div>\r\n                <div class=\"one-txt\">\r\n                  <span>橙子影视评分：</span>\r\n                  <span class=\"\">{{item.rating.average}}分</span>\r\n                </div>\r\n                <div class=\"one-txt\">\r\n                  <span>导演：</span>\r\n                  <span>{{item.directors[0].name}}</span>\r\n                </div>\r\n                <div class=\"one-txt\">\r\n                  <span>主演：</span>\r\n                  <span>{{item.avatarsInfo}}</span>\r\n                </div>\r\n                <div class=\"one-txt \">\r\n                  <span>{{item.genresInfo}}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"fl buyinfo\">\r\n                <div class=\"buybtn\" @click.stop=\"buyTickets(item.id)\">\r\n                  <!-- color=\"linear-gradient(to right, #FF429B, #FF3472)\" -->\r\n                  <van-button round size=\"small\" type=\"info\" color=\"linear-gradient(to right, #FF429B, #FF3472)\" >购票</van-button>\r\n                </div>\r\n                <!-- <div>特惠</div> -->\r\n              </div>\r\n            </div>\r\n            <p class=\"notice\" v-if=\"!isHas\">已经没有更多数据可以加载了！</p>\r\n          </div>\r\n\r\n        <!-- 方式二 -->\r\n        <!-- </van-tab> -->\r\n        <!-- <van-tab title=\"影院\">\r\n        内容 44\r\n        </van-tab>\r\n        <van-tab title=\"即将上映\">\r\n        内容 44\r\n        </van-tab>\r\n    </van-tabs> -->\r\n\r\n    <!-- </div> -->\r\n\r\n</template>\r\n\r\n<script>\r\n  import $ from 'jquery'\r\n  import { createNamespacedHelpers } from \"vuex\";\r\n  const { mapState } = createNamespacedHelpers(\"movielistModule\");\r\n\r\n  export default {\r\n    name:'movielist',\r\n\r\n    computed:{\r\n      ...mapState([\"movieData\", \"params\",\"isHas\",\"isInit\",\"isInitial\",\"movieList\",\"movieListH\",\"movieListData\"])\r\n    },\r\n\r\n    methods:{\r\n      getMovieData(){\r\n\r\n        let self =this;\r\n\r\n        this.$toast.loading({\r\n          duration:0,\r\n          message:\"数据加载中...\"\r\n        });\r\n\r\n        // 请求数据\r\n        this.axios({\r\n\r\n          method:\"GET\", //get 请求方式\r\n\r\n          // 请求地址获取正在热映的电影：\r\n          // url:'https://douban.uieee.com/v2/movie/in_theaters?start=0&count=10&city=广州'\r\n          url:\"https://douban.uieee.com/v2/movie/in_theaters\",\r\n\r\n          params:this.params // 请求参数\r\n        })\r\n\r\n        .then(result => {\r\n        // console.log(this); //检测该this指向的就是VueComponent该组件\r\n        // console.log(\"result.data.subjects ==> \", result.data.subjects); // 数据格式修改后的result，并且放到movieData中\r\n        \r\n        result.data.subjects.forEach(v => {\r\n\r\n          v.genresInfo = v.genres.join(\" | \"); //合并电影类型格式如 剧情|犯罪\r\n          // console.log('v.genresInfo=>',v.genresInfo);\r\n\r\n          v.avatarsInfo = \"\"; // 合并演员\r\n          v.casts.forEach(item => {\r\n            v.avatarsInfo += item.name + \" / \"; //如 胡歌/桂纶镁/廖凡\r\n        });\r\n\r\n          v.avatarsInfo = v.avatarsInfo.slice(0,-3); //去掉最后一个名字的“ /” 根据自己所需格式来截取\r\n          // console.log('v.avatarsInfo=>',v.avatarsInfo);\r\n        });\r\n\r\n\r\n        // 懒加载\r\n        if(this.isInit){\r\n          let movieList = this.$refs.movielist;\r\n          // console.log('movieList=>',movieList);\r\n\r\n          // 获取滚动区域movielist的高度\r\n          let movieListH = movieList.clientHeight;\r\n          // console.log('movieListH=>',movieListH);\r\n\r\n          //提交修改movieData数据\r\n          this.$store.commit(\"movielistModule/changeMovieList\",{\r\n            movieList,\r\n            movieListH,\r\n            // movieListData\r\n          });\r\n\r\n        }\r\n          // this.isInit = false;\r\n          // console.log('result=>',result);\r\n          // console.log(\"result.data.subjects ==> \", result.data.subjects); // 数据格式修改后的result，并且放到movieData中\r\n          \r\n          // 通过传参方式\r\n          this.$store.commit('movielistModule/changeMovieData',result);\r\n\r\n          this.$toast.clear();\r\n\r\n        })\r\n        .catch(err => {\r\n        // console.log('err=>',err);\r\n        this.$toast.clear();\r\n        });\r\n      },\r\n\r\n      //查看电影详情\r\n      viewMovieDetail(o) {\r\n        this.$router.push(o);\r\n      },\r\n\r\n      // 懒加载优化\r\n      lazyLoad(){\r\n        // console.log('1111');\r\n\r\n        let self = this;\r\n        \r\n        if(!self.isHas){\r\n          // console.log('没有数据了');\r\n          return;\r\n        }\r\n\r\n          // console.log('this.scrollTop=>',this.scrollTop);\r\n          // let that = this;\r\n\r\n          // 函数节流和函数防抖\r\n          let timer = setTimeout(function(){\r\n            // console.log('滑动！');\r\n            // 生成一个清掉一个定时器产生数据只保留一个\r\n            for(let i = 1; i<self.movieListData.timers.length; i++){\r\n              clearTimeout(self.movieListData.timers[i]);\r\n            }\r\n\r\n            // 最后一个节点\r\n            let movieItem = self.$refs.movieitem[self.$refs.movieitem.length - 1];\r\n            // console.log('movieItem ==> ', movieItem);\r\n\r\n            //获取底部导航高度\r\n            let tabbarH = document.querySelector('.indexfooter').clientHeight;\r\n            // console.log(\"tabbarH ==> \", tabbarH);\r\n\r\n            //获取元素距离可视区域顶部的距离\r\n            let movieItemStyle = movieItem.getBoundingClientRect();\r\n\r\n            let top = movieItemStyle.top;\r\n            // console.log(\"top ==> \", top);\r\n                        \r\n            let movieItemMarginBottom = parseFloat(getComputedStyle(movieItem).marginBottom);\r\n            // console.log('movieItemMarginBottom ==> ', movieItemMarginBottom);\r\n           \r\n            let movieItemH = movieItemStyle.height;\r\n            // console.log('movieItemH ==> ', movieItemH);\r\n           \r\n           \r\n            // 核心 满足就发起请求 50是容差！！！！！！ 测试不到准确一些的值\r\n            let isPass = innerHeight - tabbarH - movieItemMarginBottom - movieItemH + 50 >= top; \r\n            // console.log('isPass ==> ', isPass);\r\n\r\n            if (isPass) {\r\n              // console.log('发起数据请求');\r\n              //发起数据请求\r\n              self.getMovieData();\r\n            }\r\n          self.$store.state.movielistModule.movieListData.timers = [];\r\n\r\n        },1000);\r\n\r\n          self.$store.state.movielistModule.movieListData.timers.push(timer);\r\n          // console.log('timers=>',timers);\r\n       \r\n      },\r\n\r\n      // 购票\r\n      buyTickets(id){\r\n\r\n        //获取用户登录状态\r\n        let userStatus = localStorage.getItem('user');\r\n\r\n        // 判断是否是登录状态\r\n        if (userStatus){\r\n          userStatus = JSON.parse(userStatus);\r\n\r\n          // 没有登录\r\n          if (!userStatus.isLogin) {\r\n            Dialog.confirm({\r\n                title: '您还没有登录不能购买该电影哦！',\r\n                message:'确定将自动跳转到登录页面'\r\n                }).then(() => {\r\n                  return this.$router.push({name: 'login'});\r\n            }).catch(() => {\r\n              // on cancel\r\n            });\r\n          }\r\n\r\n          // 已经登录\r\n          this.$router.push({name:'buyTickets',query:{id}});\r\n          \r\n        }else{\r\n\r\n          Dialog.confirm({\r\n              title: '您还没有登录不能购买该电影哦！',\r\n              message:'确定将自动跳转到登录页面'\r\n              }).then(() => {\r\n                return this.$router.push({name: 'login'});\r\n\r\n            }).catch(() => {\r\n              // on cancel\r\n            });\r\n          }\r\n          this.$toast.clear();  \r\n      }\r\n\r\n    },\r\n\r\n    created(){\r\n      let self = this;\r\n\r\n      if (!self.isInitial) {\r\n          return;\r\n      }\r\n\r\n      self.getMovieData(); //调用请求数据方法\r\n\r\n      //获取用户位置-城市定位\r\n      // $.ajax({\r\n      //   type: 'GET',\r\n      //   url: 'https://apis.map.qq.com/ws/location/v1/ip',\r\n      //   data:{\r\n      //     key:'7RHBZ-XCUWR-A63W3-WSKOU-TWDC5-5BBLP',\r\n      //     output: 'jsonp'\r\n      //   },\r\n      //   dataType: 'jsonp',\r\n      //   success: function (data) {\r\n      //     // console.log('citydata=>',data);\r\n      //     self.$store.commit('movielistModule/changeLocationCity', data.result.ad_info.city.replace(/市$/, ''))\r\n        \r\n      //   if (!self.isInitial) {\r\n      //     return;\r\n      //   }\r\n      //     self.getMovieData(); //调用请求数据方法\r\n      //   }\r\n      // })\r\n\r\n      // return;\r\n     \r\n    },\r\n    \r\n    mounted(){\r\n    // if (!this.isInitial) {\r\n    //   console.log('返回懒加载测试有否'); \r\n    // }\r\n    \r\n    }\r\n\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  // .moviebox{\r\n  //     background-color: #f5f5f5;\r\n  //     position: fixed;\r\n  //     top:54px;\r\n  //     bottom: 50px;\r\n  //     left: 0;\r\n  //     right: 0;\r\n\r\n  //     .van-tabs{\r\n  //       position: static;\r\n  //     }\r\n\r\n  //     /deep/.van-tab{\r\n  //       font-size: 16px;\r\n  //     }\r\n      .movielist{\r\n        // height: calc(~\"100%\" - 100px);\r\n        margin-top: 1px;\r\n\r\n        position: absolute;\r\n        top: 44px;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        overflow-y: auto;\r\n      }\r\n      .movieitem{\r\n        margin-bottom: 8px;\r\n        background-color: #fff;\r\n\r\n        .movieimg{\r\n          width: 80px;\r\n          height: 120px;\r\n          background-color:#f5f5f5;\r\n          border-radius: 8px;\r\n          margin-top: 11px;\r\n\r\n          .autoimg{\r\n            border-radius: 8px;\r\n          }\r\n        }\r\n\r\n        .movieinfo{\r\n          width: calc(~\"100% - 160px - 20px\");\r\n          padding: 0 10px;\r\n          text-align: left;\r\n          color: #888;\r\n          > div {\r\n            height: 28px;\r\n            line-height: 28px;\r\n            &:nth-child(1) {\r\n              font-size: 18px;\r\n              color: #333;\r\n            }\r\n            &:nth-child(2) {\r\n              font-size: 15px;\r\n              color: #FF9C1C;\r\n            }\r\n            &:nth-child(3) {\r\n              font-size: 16px;\r\n            }\r\n            &:nth-child(4) {\r\n              font-size: 16px;\r\n            }\r\n            &:last-child{\r\n              margin-top: 4px;\r\n              >span{\r\n                color: #333;\r\n                font-size: 13px;\r\n                border:1px solid #b0b0b0;\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        .buyinfo {\r\n          width:70px;\r\n          text-align: center;\r\n          margin-top: 45px;\r\n          color: #808080;\r\n          font-size: 13px;\r\n          \r\n          .buybtn {\r\n          height: 40px;\r\n          }\r\n        }\r\n      }\r\n\r\n      .notice{\r\n        padding: 0;\r\n        color: #aaa;\r\n        text-align: center;\r\n        padding: 10px 0;\r\n        font-size: 12px;\r\n        background-color: #f5f5f5;\r\n      }\r\n  // } \r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Movielist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Movielist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Movielist.vue?vue&type=template&id=608affa4&scoped=true&\"\nimport script from \"./Movielist.vue?vue&type=script&lang=js&\"\nexport * from \"./Movielist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Movielist.vue?vue&type=style&index=0&id=608affa4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"608affa4\",\n  null\n  \n)\n\nexport default component.exports","// a string of all valid unicode whitespaces\n// eslint-disable-next-line max-len\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n"],"sourceRoot":""}