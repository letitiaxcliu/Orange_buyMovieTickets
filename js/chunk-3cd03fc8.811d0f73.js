(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cd03fc8"],{"043a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moviedetail"},[a("div",{staticClass:"mdetailbg",style:{"background-image":"linear-gradient(to bottom, rgba(245,245,245, 0), rgba(245,245,245, .3), rgba(245,245,245, .94)40%),url("+t.movieDetailData.images.large+")"}}),a("nav",[a("van-nav-bar",{attrs:{"left-text":"返回",title:"电影详情","left-arrow":"",border:!1,fixed:!0},on:{"click-left":t.back}},[a("i",{staticClass:"share",attrs:{slot:"right"},slot:"right"})])],1),a("div",{staticClass:"mdetailbox"},[a("div",{staticClass:"player"},[a("van-icon",{staticClass:"play",attrs:{name:"play-circle",size:"42","data-play":"0"},on:{click:t.showPlay}}),t.isView?a("video",{staticClass:"video",attrs:{controls:"",id:"video"}},[a("source",{class:{active:t.isView},attrs:{src:t.movieDetailData.trailer_urls[0],type:"video/mp4"}})]):t._e()],1),a("div",{staticClass:"mdetail_mainInfo clearfix"},[a("div",{staticClass:"mdinfo_img fl"},[a("img",{staticClass:"autoimg",attrs:{src:t.movieDetailData.images.small,alt:""}})]),a("div",{staticClass:"mdinfo_msg fl"},[a("div",{staticClass:"mi-title one-txt"},[t._v(t._s(t.movieDetailData.title))]),a("div",{staticClass:"mi_grade"},[t._v(t._s(t.movieDetailData.rating.average)+" 分")]),a("div",[t._v("时长："+t._s(t.movieDetailData.durations[0]))]),a("div",{staticClass:"type_language"},[a("span",[t._v(t._s(t.movieDetailData.genresInfo))]),a("span",[t._v(t._s(t.movieDetailData.languages[0]))])]),a("div",{staticClass:"mi-info"},[a("div",[a("i",{staticClass:"love"}),a("span",[t._v(t._s(t.movieDetailData.comments))])]),a("div",[a("i",{staticClass:"collect",class:{active:t.likeActive},on:{click:function(e){return t.likeMovie(t.movieDetailData)}}}),a("span",[t._v(t._s(t.movieDetailData.collects))])])])])]),a("div",{staticClass:"mdetail_introduction"},[a("van-tabs",{attrs:{color:"#FF429B"}},[a("van-tab",{attrs:{title:"简介"}},[a("div",{staticClass:"synopsis"},[a("div",{staticClass:"movie-detail-b"},[a("div",{staticClass:"mb-title"},[t._v("简介")]),a("p",{staticClass:"m-text",style:{display:t.display}},[t._v(t._s(t.movieDetailData.summary))])]),a("div",{staticClass:"arrow",on:{click:t.changeDisplay}},[a("van-icon",{attrs:{name:"arrow-down"}})],1)]),a("div",{staticClass:"actor"},[a("div",{staticClass:"mb-title"},[t._v("演员")]),a("div",{staticClass:"actorbox"},[a("div",{staticClass:"actorlist clearfix",style:{width:t.movieDetailData.casts.length*t.movieDetailData.w+"px"}},t._l(t.movieDetailData.casts,(function(e,i){return a("div",{key:i,ref:"actoritem",refInFor:!0,staticClass:"actoritem"},[a("div",{staticClass:"actorimg"},[a("img",{staticClass:"autoimg",attrs:{src:e.avatars.small,alt:""}})]),a("div",{staticClass:"name one-txt"},[t._v(t._s(e.name))])])})),0)])])]),a("van-tab",{attrs:{title:"剧照"}},[a("div",{staticClass:"photo clearfix"},t._l(t.movieDetailData.photos,(function(t,e){return a("div",{key:e,staticClass:"photoimg fl"},[a("img",{staticClass:"autoimg",attrs:{src:t.image,alt:""}})])})),0)]),a("van-tab",{attrs:{title:"影评"}},[a("div",{staticClass:"comments"},[a("div",{staticClass:"commentslist"},t._l(t.movieDetailData.popular_reviews,(function(e,i){return a("div",{key:i,staticClass:"commentitem"},[a("div",{staticClass:"user clearfix"},[a("div",{staticClass:"userimg fl"},[a("img",{staticClass:"autoimg",attrs:{src:e.author.avatar,alt:""}})]),a("div",{staticClass:"username fl"},[t._v(t._s(e.author.name))])]),a("div",{staticClass:"txt two-txt"},[t._v(t._s(e.summary))])])})),0)])])],1)],1),a("div",{staticClass:"footer clearfix"},[t._m(0),a("div",{staticClass:"buybtn fr",on:{click:function(e){return t.buyTickets(t.movieDetailData.id)}}},[a("van-button",{attrs:{round:"",type:"info",color:"linear-gradient(to right, #FF429B, #FF3472)"}},[t._v("购票")])],1)])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon fl"},[a("div",{staticClass:"fl"},[a("i",{staticClass:"like"}),a("span",[t._v("想看")])]),a("div",{staticClass:"fl"},[a("i",{staticClass:"liked"}),a("span",[t._v("看过")])])])}],r=(a("3546"),a("0e8d"),a("fdc1"),a("851c"),a("6ac8"),a("a94a"),a("639b"),a("4f5b"),a("b287"),a("81af"),a("7217")),o=a("9d37"),n=a("08c1");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u=Object(n["a"])("movieDetailModule"),v=u.mapState,m=u.mapMutations,f={name:"movieDetail",data:function(){return{isView:!1,active:0}},computed:l({},v(["movieDetailData","display","likeActive"])),methods:l({},m(["changeDisplay","resetState"]),{back:function(){this.$router.go(-1)},likeMovie:function(t){var e=this,a=localStorage.getItem("user");if(a){a=JSON.parse(a),a.isLogin||r["a"].confirm({title:"您还没有登录不能收藏该电影哦！",message:"确定将自动跳转到登录页面"}).then((function(){return e.$router.push({name:"login"})})).catch((function(){}));var i=localStorage.getItem("likeMovieData");i=i?JSON.parse(i):{};var s=i[a.username];s||(i[a.username]=[]);for(var o=0;o<i[a.username].length;o++)if(i[a.username][o].id==t.id)return void this.$toast("已经收藏过这个电影了");this.$store.commit("movieDetailModule/changelikeActive",!0),i[a.username].unshift(t),localStorage.setItem("likeMovieData",JSON.stringify(i)),this.$toast.success("收藏成功")}else r["a"].confirm({title:"您还没有登录不能收藏该电影哦！",message:"确定将自动跳转到登录页面"}).then((function(){return e.$router.push({name:"login"})})).catch((function(){}));this.$toast.clear()},buyTickets:function(t){var e=this,a=localStorage.getItem("user");a?(a=JSON.parse(a),a.isLogin||r["a"].confirm({title:"您还没有登录不能购买该电影哦！",message:"确定将自动跳转到登录页面"}).then((function(){return e.$router.push({name:"login"})})).catch((function(){})),this.$router.push({name:"buyTickets",query:{id:t}})):r["a"].confirm({title:"您还没有登录不能购买该电影哦！",message:"确定将自动跳转到登录页面"}).then((function(){return e.$router.push({name:"login"})})).catch((function(){})),this.$toast.clear()},showPlay:function(){this.isView=!this.isView}}),created:function(){var t=this;this.$toast.loading({duration:0,message:"加载中..."}),this.resetState();var e=this.$route.params.id;this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/subject/"+e}).then((function(e){e.data.genresInfo=e.data.genres.join(" / ");var a=e.data.comments_count;e.data.comments=a>=1e4?(a/1e4).toFixed(1)+"w":a>=1e3?(a/1e3).toFixed(1)+"k":a;var i=e.data.collect_count;e.data.collects=i>=1e4?(i/1e4).toFixed(1)+"w":i>=1e3?(i/1e3).toFixed(1)+"k":i,e.data.w=0,t.$store.dispatch("movieDetailModule/getMDetailData",e.data).then((function(){var e=t.$refs.actoritem[0].clientWidth;t.$store.commit("movieDetailModule/changeW",e);var a=localStorage.getItem("user"),i=a&&JSON.parse(a).isLogin;if(t.$toast.clear(),i){var s=JSON.parse(a).username,r=localStorage.getItem("likeMovieData");r=r?JSON.parse(r):{};var o=r[s];o=o||[];for(var n=0;n<o.length;n++)if(t.movieDetailData.id==o[n].id)return void t.$store.commit("movieDetailModule/changelikeActive",!0);t.$store.commit("movieDetailModule/changelikeActive",!1)}else t.$store.commit("movieDetailModule/changelikeActive",!1);t.$toast.clear()}))})).catch((function(e){t.$toast.clear()}))}},d=f,g=(a("cf43"),a("5511")),h=Object(g["a"])(d,i,s,!1,null,"6e88357b",null);e["default"]=h.exports},"077b":function(t,e,a){},"0e8d":function(t,e,a){"use strict";var i=a("8682"),s=a("e3e9").filter,r=a("84b3"),o=a("6f5d"),n=r("filter"),c=o("filter");i({target:"Array",proto:!0,forced:!n||!c},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"25d2":function(t,e,a){var i=a("f6cc");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"4f5b":function(t,e,a){var i=a("8682"),s=a("3e59"),r=a("9964"),o=a("a0a3"),n=o((function(){r(1)}));i({target:"Object",stat:!0,forced:n},{keys:function(t){return r(s(t))}})},"639b":function(t,e,a){var i=a("8682"),s=a("cc55"),r=a("d880"),o=a("51c4"),n=a("926c"),c=a("1386");i({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){var e,a,i=o(t),s=n.f,l=r(i),u={},v=0;while(l.length>v)a=s(i,e=l[v++]),void 0!==a&&c(u,e,a);return u}})},"6ac8":function(t,e,a){"use strict";var i=a("8682"),s=a("8a2e"),r=a("25d2"),o=a("f4b4"),n=a("a0a3"),c=1..toFixed,l=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},v=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},m=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){c.call({})}));i({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,a,i,n,c=r(this),m=s(t),f=[0,0,0,0,0,0],d="",g="0",h=function(t,e){var a=-1,i=e;while(++a<6)i+=t*f[a],f[a]=i%1e7,i=l(i/1e7)},p=function(t){var e=6,a=0;while(--e>=0)a+=f[e],f[e]=l(a/t),a=a%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==f[t]){var a=String(f[t]);e=""===e?a:e+o.call("0",7-a.length)+a}return e};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(d="-",c=-c),c>1e-21)if(e=v(c*u(2,69,1))-69,a=e<0?c*u(2,-e,1):c/u(2,e,1),a*=4503599627370496,e=52-e,e>0){h(0,a),i=m;while(i>=7)h(1e7,0),i-=7;h(u(10,i,1),0),i=e-1;while(i>=23)p(1<<23),i-=23;p(1<<i),h(1,1),p(2),g=b()}else h(0,a),h(1<<-e,0),g=b()+o.call("0",m);return m>0?(n=g.length,g=d+(n<=m?"0."+o.call("0",m-n)+g:g.slice(0,n-m)+"."+g.slice(n-m))):g=d+g,g}})},"9d37":function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return i}))},a94a:function(t,e,a){var i=a("8682"),s=a("a0a3"),r=a("51c4"),o=a("926c").f,n=a("cc55"),c=s((function(){o(1)})),l=!n||c;i({target:"Object",stat:!0,forced:l,sham:!n},{getOwnPropertyDescriptor:function(t,e){return o(r(t),e)}})},cf43:function(t,e,a){"use strict";var i=a("077b"),s=a.n(i);s.a},f4b4:function(t,e,a){"use strict";var i=a("8a2e"),s=a("0e90");t.exports="".repeat||function(t){var e=String(s(this)),a="",r=i(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(a+=e);return a}}}]);
//# sourceMappingURL=chunk-3cd03fc8.811d0f73.js.map